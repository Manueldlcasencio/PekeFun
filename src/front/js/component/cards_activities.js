import React, { useState, useContext } from "react";
import { Link } from "react-router-dom";
import { Context } from "../store/appContext.js";

export const Cards_activities = () => {
    const favorites = store.favorites;
    return (
        <div className="row row-cols-1 row-cols-md-6 g-12">
            <div className="col">
                <div className="card m-1 p-1">
                    <img src="https://picsum.photos/100/80" className="card-img-top" alt="..." />
                    <div className="card-body">
                        <h5 className="card-title">Card title</h5>
                        <p className="card-text">
                            This is a longer card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.
                        </p>
                        <button type="btn" className="btn btn-primary">Saber Más</button>
                    </div>
                    
                </div>
            </div>
            <div className="col">
                <div className="card m-1 p-1">
                    <img src="https://picsum.photos/100/80" className="card-img-top" alt="..." />
                    <div className="card-body">
                        <h5 className="card-title">Card title</h5>
                        <p className="card-text">
                            This is a longer card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.
                        </p>
                        <button type="btn" className="btn btn-primary">Saber Más</button>
                    </div>
                </div>
            </div>
            <div className="col">
                <div className="card m-1 p-1">
                    <img src="https://picsum.photos/100/80" className="card-img-top" alt="..." />
                    <div className="card-body">
                        <h5 className="card-title">Card title</h5>
                        <p className="card-text">This is a longer card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
                        <button type="btn" className="btn btn-primary">Saber Más</button>
                    </div>
                </div>
            </div>
            <div className="col">
                <div className="card m-1 p-1">
                    <img src="https://picsum.photos/100/80" className="card-img-top" alt="..." />
                    <div className="card-body">
                        <h5 className="card-title">Card title</h5>
                        <p className="card-text">
                            This is a longer card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.
                        </p>
                        <button type="btn" className="btn btn-primary">Saber Más</button>
                    </div>
                </div>
            </div>
            <div className="col">
                <div className="card m-1 p-1">
                    <img src="https://picsum.photos/100/80" className="card-img-top" alt="..." />
                    <div className="card-body">
                        <h5 className="card-title">Card title</h5>
                        <p className="card-text">
                            This is a longer card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.
                        </p>
                        <button type="btn" className="btn btn-primary">Saber Más</button>
                    </div>
                </div>
            </div>
            <div className="col">
                <div className="card m-1 p-1">
                    <img src="https://picsum.photos/100/80" className="card-img-top" alt="..." />
                    <div className="card-body">
                        <h5 className="card-title">Card title</h5>
                        <p className="card-text">
                            This is a longer card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.
                        </p>
                        <button type="btn" className="btn btn-primary">Saber Más</button>
                    </div>
                </div>
            </div>
            <div className="col">
                <div className="card m-1 p-1">
                    <img src="https://picsum.photos/100/80" className="card-img-top" alt="..." />
                    <div className="card-body">
                        <h5 className="card-title">Card title</h5>
                        <p className="card-text">
                            This is a longer card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.
                        </p>
                        <button type="btn" className="btn btn-primary">Saber Más</button>
                    </div>
                </div>
            </div>
            <div className="col">
                <div className="card m-1 p-1">
                    <img src="https://picsum.photos/100/80" className="card-img-top" alt="..." />
                    <div className="card-body">
                        <h5 className="card-title">Card title</h5>
                        <p className="card-text">
                            This is a longer card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.
                        </p>
                        <button type="btn" className="btn btn-primary">Saber Más</button>
                    </div>
                </div>
            </div>
            <div className="col">
                <div className="card m-1 p-1">
                    <img src="https://picsum.photos/100/80" className="card-img-top" alt="..." />
                    <div className="card-body">
                        <h5 className="card-title">Card title</h5>
                        <p className="card-text">
                            This is a longer card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.
                        </p>
                        <button type="btn" className="btn btn-primary">Saber Más</button>
                    </div>
                </div>
            </div>
            <div className="col">
                <div className="card m-1 p-1">
                    <img src="https://picsum.photos/100/80" className="card-img-top" alt="..." />
                    <div className="card-body">
                        <h5 className="card-title">Card title</h5>
                        <p className="card-text">
                            This is a longer card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.
                        </p>
                        <button type="btn" className="btn btn-primary">Saber Más</button>
                    </div>
                </div>
            </div>
            <div className="col">
                <div className="card m-1 p-1">
                    <img src="https://picsum.photos/100/80" className="card-img-top" alt="..." />
                    <div className="card-body">
                        <h5 className="card-title">Card title</h5>
                        <p className="card-text">
                            This is a longer card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.
                        </p>
                        <button type="btn" className="btn btn-primary">Saber Más</button>
                    </div>
                </div>
            </div>
            <div className="col">
                <div className="card m-1 p-1">
                    <img src="https://picsum.photos/100/80" className="card-img-top" alt="..." />
                    <div className="card-body">
                        <h5 className="card-title">Card title</h5>
                        <p className="card-text">
                            This is a longer card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.
                        </p>
                        <button type="btn" className="btn btn-primary">Saber Más</button>
                    </div>
                </div>
            </div>
        </div>
    );
};


/*

hay que agregar:
                        <Link to={`/people/${id}`} className="btn btn-secondary" 
                            onClick={() => actions.getPeople({ id: id, name: name, height: height, eye_color: eye_color, hair_color: hair_color, birth_year: birth_year })}>
                                Details
                        </Link>
                        <Link className="btn btn-outline-warning" 
                            onClick={() => actions.addFavorite({id, name}, favorites)}>
                                <i className="far fa-heart fa-lg"></i>
                        </Link>
                    </div>

export const CardPeople = ({ id, name, height, hair_color, eye_color, birth_year }) => {
    const { store, actions } = useContext(Context);
    const people = store.people;
    const favorites = store.favorites;

    const urlImage = "https://starwars-visualguide.com/assets/img/characters/" + id + ".jpg";
    const handleOnErrorImg = (e) => {
        e.target.src = "https://starwars-visualguide.com/assets/img/placeholder.jpg";
    }


    return (
        <div className="col">
            <div className="card border-dark my-3 mx-2 text-bg-dark">
                <img alt="" src={urlImage} onError={handleOnErrorImg}></img>
                <div className="card-body">
                    <h5 className="card-title">{name}</h5>
                    <p className="card-text">Height: {height/100 + " mt"}</p>
                    <p className="card-text">Birth Year: {birth_year} </p>
                    <p className="card-text">Hair Color: {hair_color} </p>
                    <p className="card-text">Eye Color: {eye_color} </p>
                    <div className="d-flex justify-content-between">
                        <Link to={`/people/${id}`} className="btn btn-secondary" 
                            onClick={() => actions.getPeople({ id: id, name: name, height: height, eye_color: eye_color, hair_color: hair_color, birth_year: birth_year })}>
                                Details
                        </Link>
                        <Link className="btn btn-outline-warning" 
                            onClick={() => actions.addFavorite({id, name}, favorites)}>
                                <i className="far fa-heart fa-lg"></i>
                        </Link>
                    </div>
                </div>
            </div>
        </div>
    );



    EN    FLUX!!!!
    
    const getState = ({ getStore, setStore }) => {
	return {
		store: {
            people: [],
            selectPeople: [],
			favorites: [],
            selectFavorites: [],
		},
		actions: {
            getPeople: (people) => { setStore({ selectPeople: people, }); },
			getPeoples: async () => {
                const store = getStore();
                if (localStorage.getItem("people") === null) {
                    const response = await fetch(`https://swapi.dev/api/people`, {
                        method: "GET",
                        ContentType: "application/json",
                    });
                    const responseJSON = await response.json();

                    setStore({ people: responseJSON.results, });

                    localStorage.setItem(`people`, JSON.stringify(store.people));
                    let storage = localStorage.getItem("people");
                } else {
                    setStore({ people: JSON.parse(localStorage.getItem("people")), });
                }
            },
            addFavorite: ({id, name}, favorites) => {
                console.log("entró", {id, name});
                setStore({ favorites: [...favorites, {name}]});
            },

            deleteFavorite: ({id, name}, favorites) => {
                console.log("pedido de baja", {id, name});
                const updatedFavorites = favorites.filter((favorite) => favorite.name !== name);
                setStore({ favorites: updatedFavorites });
            }

		}
	};
};

export default getState;

    
    */